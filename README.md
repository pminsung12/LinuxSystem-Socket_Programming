# LinuxSystem-Socket_Programming
TCP를 활용한 서버와 클라이언트 구현해 영화파일(mp4) 전송 기능 구현  
  
## 목표
  1. C를 사용하여 리눅스에서 빌드가능하고 동작가능하도록 Client가 알려진 서버 주소로 접속하여 Hello Server 메시지를 전달한다.
  2. 서버는 메시지를 받아 화면에 출력하고 클라이언트에게 역시 Hello Client 메시지를 전달한다.
  3. Client는 이를 받아서 화면에 출력한다.  
  
## 목표의 변형
위의 결과물을 변형해 지정된 동영상 파일을 서버에서 클라이언트로 전송하도록 구현함.  
  1. 클라이언트는 서버에게 접속하여 Hello Server 메시지를 전송하고 서버는 미리 지정된 영화 파일을 접속한 Client에게 발송(패킷단위)  
  2. 클라이언트는 서버로부터  패킷을 받아서 file write를 통해 저장 -> 마지막 원본 파일과 받은 내용의 파일과 사이즈가 같은지 비교(패킷 손실 대비)

## 구현
- 이 내용들을 리눅스 환경에서 구현하여 compile과 link를 하고 virtual machine을 사용해 client와 server을 동시해 띄워 테스트함.  

### Server
  1. 버프사이즈를 1460만큼 설정했고, 서버의 listen 소켓 데이터 구조를 생성해 bind 과정을 거친다.  
  2. 서버와 클라이언트 간의 link가 완료된 후 client에게 받아온 메시지를 수신하고 수신했다는 의미로 Hello Client라는 멘트를 출력하도록 했다.  
  3. 이후 접속해오는 client에게 전송해줄 동영상 파일의 byte 수를 읽어 send()함수를 활용해 client에게 패킷단위로 전송 후 완료되면 완료 메시지, 전송한 총 바이트 수를 출력하고 파일 닫고 소켓 닫고 서버를 마친다.

### Client
  1. 서버접속을 위한 소켓을 생성하고 서버에 연결하고 연결 후 서버로 전송할 메시지를 입력받는다.
  2. 저장한 메시지를 send() 함수를 통해 서버에 전송하고 서버가 보낼 파일의 전체 바이트 수를 전달받아 저장해 놓고 수신할 데이터를 저장할 mp4 파일을 open의 O CREATE 옵션을 활용해 새로 만든다.
  3. 서버가 전송해줘서 recv() 한 데이터를 이 파일에 write 해주고 패킷으로 받아온 양을 +하며 체크하고 받아온 양이 앞서 저장한 파일의 총크기와 같아질 때 종료하고, 전송완료 메시지와 얼마만큼의 크기를 전송받았는지 출력해준다.
